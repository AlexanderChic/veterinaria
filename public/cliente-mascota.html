<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mis Mascotas - Veterinaria Mascotico</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- Estilos personalizados -->
  <link href="css/visitas.css" rel="stylesheet">
</head>
<body>
  <!-- Header/Navbar -->
  <header class="dashboard-header">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <!-- Logo y marca -->
        <div class="navbar-brand d-flex align-items-center">
          <div class="brand-icon me-2">
            <img src="img/mascotico.png" alt="Logo Mascotico">
          </div>
          <div>
            <h5 class="mb-0">Veterinaria Mascotico</h5>
            <small class="text-muted">Gestión de Mascotas</small>
          </div>
        </div>

        <!-- Botón toggle para móvil -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Contenido del navbar -->
        <div class="collapse navbar-collapse" id="navbarContent">
          <div class="navbar-nav ms-auto">
            <!-- Notificaciones -->
            <div class="nav-item dropdown me-3">
              <a class="nav-link notification-bell" href="#" role="button" data-bs-toggle="dropdown">
                <i class="bi bi-bell"></i>
                <span class="notification-badge">3</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end notification-dropdown">
                <li><h6 class="dropdown-header">Notificaciones</h6></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-calendar-check me-2"></i>Cita programada para hoy</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-exclamation-circle me-2"></i>Recordatorio de vacuna</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-info-circle me-2"></i>Nuevo mensaje</a></li>
              </ul>
            </div>

            <!-- Usuario -->
            <div class="nav-item dropdown">
              <a class="nav-link user-profile" href="#" role="button" data-bs-toggle="dropdown">
                <div class="user-avatar">
                  <i class="bi bi-person-circle"></i>
                </div>
                <div class="user-info">
                  <span class="user-name">Usuario Ejemplo</span>
                  <small class="user-role">Cliente</small>
                </div>
                <i class="bi bi-chevron-down ms-2"></i>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>Mi Perfil</a></li>
                <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Configuración</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="dashboard-sidebar">
      <div class="sidebar-content">
        <!-- Menú principal -->
        <nav class="sidebar-nav">
          <div class="nav-section">
            <h6 class="nav-section-title">Principal</h6>
            <ul class="nav-items">
              <li class="nav-item">
                <a href="cliente-dashboard.html" class="nav-link">
                  <i class="bi bi-house-door"></i>
                  <span>Dashboard</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="cliente-citas.html" class="nav-link">
                  <i class="bi bi-calendar-event"></i>
                  <span>Citas</span>
                  <span class="badge">5</span>
                </a>
              </li>
              <li class="nav-item active">
                <a href="cliente-mascotas.html" class="nav-link">
                  <i class="bi bi-heart"></i>
                  <span>Mascotas</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="nav-section">
            <h6 class="nav-section-title">Gestión</h6>
            <ul class="nav-items">
              <li class="nav-item">
                <a href="#servicios" class="nav-link">
                  <i class="bi bi-clipboard-pulse"></i>
                  <span>Servicios</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#historial" class="nav-link">
                  <i class="bi bi-file-medical"></i>
                  <span>Historial Médico</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#reportes" class="nav-link">
                  <i class="bi bi-graph-up"></i>
                  <span>Reportes</span>
                </a>
              </li>
            </ul>
          </div>

          <div class="nav-section">
            <h6 class="nav-section-title">Configuración</h6>
            <ul class="nav-items">
              <li class="nav-item">
                <a href="#perfil" class="nav-link">
                  <i class="bi bi-person-gear"></i>
                  <span>Mi Perfil</span>
                </a>
              </li>
              <li class="nav-item">
                <a href="#ayuda" class="nav-link">
                  <i class="bi bi-question-circle"></i>
                  <span>Ayuda</span>
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <!-- Widget de resumen -->
        <div class="sidebar-widget">
          <div class="widget-header">
            <i class="bi bi-heart-pulse"></i>
            <h6>Recordatorio</h6>
          </div>
          <div class="widget-content">
            <p class="mb-1"><strong>Vacuna de Luna</strong></p>
            <small class="text-muted">Próxima semana</small>
          </div>
        </div>
      </div>
    </aside>

    <!-- Content Area -->
    <main class="dashboard-main">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h1 class="welcome-title">Mis Mascotas</h1>
            <p class="welcome-subtitle">Gestiona la información de tus compañeros peludos</p>
          </div>
          <div class="col-md-4 text-end">
            <button class="btn btn-light btn-lg" data-bs-toggle="modal" data-bs-target="#nuevaMascotaModal">
              <i class="bi bi-plus-circle me-2"></i>Registrar Mascota
            </button>
          </div>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="stats-section">
        <div class="row g-4">
          <div class="col-xl-3 col-md-6">
            <div class="stat-card">
              <div class="stat-icon success">
                <i class="bi bi-heart-pulse"></i>
              </div>
              <div class="stat-content">
                <h3>3</h3>
                <p>Mascotas Registradas</p>
                <small class="stat-change neutral">Total</small>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-md-6">
            <div class="stat-card">
              <div class="stat-icon primary">
                <i class="bi bi-shield-check"></i>
              </div>
              <div class="stat-content">
                <h3>2</h3>
                <p>Vacunas al Día</p>
                <small class="stat-change positive">Excelente</small>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-md-6">
            <div class="stat-card">
              <div class="stat-icon warning">
                <i class="bi bi-exclamation-triangle"></i>
              </div>
              <div class="stat-content">
                <h3>1</h3>
                <p>Vacuna Pendiente</p>
                <small class="stat-change negative">Requiere atención</small>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-md-6">
            <div class="stat-card">
              <div class="stat-icon info">
                <i class="bi bi-calendar-heart"></i>
              </div>
              <div class="stat-content">
                <h3>5</h3>
                <p>Próximas Citas</p>
                <small class="stat-change positive">Este mes</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Filtros y Búsqueda -->
      <div class="content-card mb-4">
        <div class="card-body">
          <div class="row g-3 align-items-center">
            <div class="col-md-4">
              <div class="input-group">
                <span class="input-group-text"><i class="bi bi-search"></i></span>
                <input type="text" class="form-control" placeholder="Buscar mascota..." id="buscarMascota">
              </div>
            </div>
            <div class="col-md-2">
              <select class="form-select" id="filtroTipo">
                <option value="">Todos los tipos</option>
                <option value="perro">Perros</option>
                <option value="gato">Gatos</option>
                <option value="ave">Aves</option>
                <option value="conejo">Conejos</option>
                <option value="otros">Otros</option>
              </select>
            </div>
            <div class="col-md-2">
              <select class="form-select" id="filtroEdad">
                <option value="">Todas las edades</option>
                <option value="cachorro">Cachorro (0-1 año)</option>
                <option value="joven">Joven (1-3 años)</option>
                <option value="adulto">Adulto (3-7 años)</option>
                <option value="senior">Senior (7+ años)</option>
              </select>
            </div>
            <div class="col-md-2">
              <select class="form-select" id="filtroSalud">
                <option value="">Estado de salud</option>
                <option value="excelente">Excelente</option>
                <option value="bueno">Bueno</option>
                <option value="regular">Regular</option>
                <option value="delicado">Delicado</option>
              </select>
            </div>
            <div class="col-md-2">
              <button class="btn btn-outline-secondary w-100" onclick="limpiarFiltros()">
                <i class="bi bi-arrow-clockwise me-1"></i>Limpiar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Grid de Mascotas -->
      <div class="content-card">
        <div class="card-header d-flex justify-content-between align-items-center">
          <h5><i class="bi bi-heart me-2"></i>Mis Mascotas</h5>
          <div class="btn-group" role="group">
            <input type="radio" class="btn-check" name="vista" id="vista-grid" autocomplete="off" checked>
            <label class="btn btn-outline-primary btn-sm" for="vista-grid">
              <i class="bi bi-grid-3x3"></i>
            </label>
            <input type="radio" class="btn-check" name="vista" id="vista-lista" autocomplete="off">
            <label class="btn btn-outline-primary btn-sm" for="vista-lista">
              <i class="bi bi-list-ul"></i>
            </label>
          </div>
        </div>
        <div class="card-body">
          <!-- Vista Grid -->
          <div id="vista-grid-content">
            <div class="row g-4">
              <!-- Mascota 1 - Max -->
              <div class="col-lg-4 col-md-6">
                <div class="mascota-card">
                  <div class="mascota-header">
                    <div class="mascota-imagen">
                      <div class="mascota-avatar">🐕</div>
                      <div class="mascota-estado excelente"></div>
                    </div>
                    <div class="mascota-actions">
                      <button class="btn btn-sm btn-outline-primary" onclick="verMascota(1)" title="Ver detalles">
                        <i class="bi bi-eye"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(1)" title="Editar">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(1)" title="Eliminar">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="mascota-body">
                    <h5 class="mascota-nombre">Max</h5>
                    <p class="mascota-raza">Golden Retriever</p>
                    <div class="mascota-info">
                      <div class="info-item">
                        <i class="bi bi-calendar3"></i>
                        <span>3 años</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-speedometer2"></i>
                        <span>28 kg</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-gender-male"></i>
                        <span>Macho</span>
                      </div>
                    </div>
                    <div class="mascota-tags">
                      <span class="tag vacunado">Vacunado</span>
                      <span class="tag microchip">Microchip</span>
                    </div>
                  </div>
                  <div class="mascota-footer">
                    <small class="text-muted">Última consulta: 20 Sep 2024</small>
                  </div>
                </div>
              </div>

              <!-- Mascota 2 - Luna -->
              <div class="col-lg-4 col-md-6">
                <div class="mascota-card">
                  <div class="mascota-header">
                    <div class="mascota-imagen">
                      <div class="mascota-avatar">🐱</div>
                      <div class="mascota-estado bueno"></div>
                    </div>
                    <div class="mascota-actions">
                      <button class="btn btn-sm btn-outline-primary" onclick="verMascota(2)" title="Ver detalles">
                        <i class="bi bi-eye"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(2)" title="Editar">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(2)" title="Eliminar">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="mascota-body">
                    <h5 class="mascota-nombre">Luna</h5>
                    <p class="mascota-raza">Gato Persa</p>
                    <div class="mascota-info">
                      <div class="info-item">
                        <i class="bi bi-calendar3"></i>
                        <span>2 años</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-speedometer2"></i>
                        <span>4.5 kg</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-gender-female"></i>
                        <span>Hembra</span>
                      </div>
                    </div>
                    <div class="mascota-tags">
                      <span class="tag pendiente">Vacuna pendiente</span>
                      <span class="tag esterilizado">Esterilizada</span>
                    </div>
                  </div>
                  <div class="mascota-footer">
                    <small class="text-muted">Última consulta: 15 Sep 2024</small>
                  </div>
                </div>
              </div>

              <!-- Mascota 3 - Toby -->
              <div class="col-lg-4 col-md-6">
                <div class="mascota-card">
                  <div class="mascota-header">
                    <div class="mascota-imagen">
                      <div class="mascota-avatar">🐕</div>
                      <div class="mascota-estado regular"></div>
                    </div>
                    <div class="mascota-actions">
                      <button class="btn btn-sm btn-outline-primary" onclick="verMascota(3)" title="Ver detalles">
                        <i class="bi bi-eye"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(3)" title="Editar">
                        <i class="bi bi-pencil"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(3)" title="Eliminar">
                        <i class="bi bi-trash"></i>
                      </button>
                    </div>
                  </div>
                  <div class="mascota-body">
                    <h5 class="mascota-nombre">Toby</h5>
                    <p class="mascota-raza">Bulldog Francés</p>
                    <div class="mascota-info">
                      <div class="info-item">
                        <i class="bi bi-calendar3"></i>
                        <span>5 años</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-speedometer2"></i>
                        <span>12 kg</span>
                      </div>
                      <div class="info-item">
                        <i class="bi bi-gender-male"></i>
                        <span>Macho</span>
                      </div>
                    </div>
                    <div class="mascota-tags">
                      <span class="tag tratamiento">En tratamiento</span>
                      <span class="tag microchip">Microchip</span>
                    </div>
                  </div>
                  <div class="mascota-footer">
                    <small class="text-muted">Última consulta: 22 Sep 2024</small>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Vista Lista (inicialmente oculta) -->
          <div id="vista-lista-content" style="display: none;">
            <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Mascota</th>
                    <th>Tipo/Raza</th>
                    <th>Edad</th>
                    <th>Peso</th>
                    <th>Estado</th>
                    <th>Última Consulta</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <span class="me-2" style="font-size: 1.5rem;">🐕</span>
                        <div>
                          <h6 class="mb-0">Max</h6>
                          <small class="text-muted">ID: #001</small>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div>
                        <span class="fw-medium">Perro</span><br>
                        <small class="text-muted">Golden Retriever</small>
                      </div>
                    </td>
                    <td>3 años</td>
                    <td>28 kg</td>
                    <td><span class="badge bg-success">Excelente</span></td>
                    <td>20 Sep 2024</td>
                    <td>
                      <div class="btn-group" role="group">
                        <button class="btn btn-sm btn-outline-primary" onclick="verMascota(1)">
                          <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(1)">
                          <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(1)">
                          <i class="bi bi-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <span class="me-2" style="font-size: 1.5rem;">🐱</span>
                        <div>
                          <h6 class="mb-0">Luna</h6>
                          <small class="text-muted">ID: #002</small>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div>
                        <span class="fw-medium">Gato</span><br>
                        <small class="text-muted">Persa</small>
                      </div>
                    </td>
                    <td>2 años</td>
                    <td>4.5 kg</td>
                    <td><span class="badge bg-warning">Bueno</span></td>
                    <td>15 Sep 2024</td>
                    <td>
                      <div class="btn-group" role="group">
                        <button class="btn btn-sm btn-outline-primary" onclick="verMascota(2)">
                          <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(2)">
                          <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(2)">
                          <i class="bi bi-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="d-flex align-items-center">
                        <span class="me-2" style="font-size: 1.5rem;">🐕</span>
                        <div>
                          <h6 class="mb-0">Toby</h6>
                          <small class="text-muted">ID: #003</small>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div>
                        <span class="fw-medium">Perro</span><br>
                        <small class="text-muted">Bulldog Francés</small>
                      </div>
                    </td>
                    <td>5 años</td>
                    <td>12 kg</td>
                    <td><span class="badge bg-secondary">Regular</span></td>
                    <td>22 Sep 2024</td>
                    <td>
                      <div class="btn-group" role="group">
                        <button class="btn btn-sm btn-outline-primary" onclick="verMascota(3)">
                          <i class="bi bi-eye"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-warning" onclick="editarMascota(3)">
                          <i class="bi bi-pencil"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="eliminarMascota(3)">
                          <i class="bi bi-trash"></i>
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal Nueva Mascota -->
  <div class="modal fade" id="nuevaMascotaModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-heart-pulse me-2"></i>Registrar Nueva Mascota
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formNuevaMascota">
            <div class="row g-4">
              <!-- Sección de imagen -->
              <div class="col-12">
                <div class="text-center mb-4">
                  <div class="mascota-imagen-upload">
                    <div class="imagen-preview" id="imagenPreview">
                      <i class="bi bi-image"></i>
                      <p>Subir foto de la mascota</p>
                    </div>
                    <input type="file" class="form-control" id="imagenMascota" accept="image/*" style="display: none;">
                    <div class="mt-2">
                      <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('imagenMascota').click()">
                        <i class="bi bi-camera me-1"></i>Seleccionar Imagen
                      </button>
                      <button type="button" class="btn btn-outline-danger ms-2" onclick="eliminarImagen()">
                        <i class="bi bi-trash me-1"></i>Eliminar
                      </button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Información básica -->
              <div class="col-12">
                <h6 class="border-bottom pb-2 mb-3">Información Básica</h6>
              </div>
              
              <div class="col-md-6">
                <label for="nombreMascota" class="form-label">Nombre de la mascota *</label>
                <input type="text" class="form-control" id="nombreMascota" required>
              </div>
              
              <div class="col-md-6">
                <label for="tipoMascota" class="form-label">Tipo de mascota *</label>
                <select class="form-select" id="tipoMascota" required onchange="actualizarEmoji()">
                  <option value="">Selecciona el tipo</option>
                  <option value="perro" data-emoji="🐕">Perro</option>
                  <option value="gato" data-emoji="🐱">Gato</option>
                  <option value="ave" data-emoji="🐦">Ave</option>
                  <option value="conejo" data-emoji="🐰">Conejo</option>
                  <option value="hamster" data-emoji="🐹">Hamster</option>
                  <option value="pez" data-emoji="🐠">Pez</option>
                  <option value="reptil" data-emoji="🦎">Reptil</option>
                  <option value="tortuga" data-emoji="🐢">Tortuga</option>
                </select>
              </div>

              <div class="col-md-6">
                <label for="razaMascota" class="form-label">Raza</label>
                <input type="text" class="form-control" id="razaMascota" placeholder="Ej: Golden Retriever, Persa, etc.">
              </div>

              <div class="col-md-6">
                <label for="colorMascota" class="form-label">Color</label>
                <input type="text" class="form-control" id="colorMascota" placeholder="Ej: Dorado, Blanco, Atigrado">
              </div>

              <div class="col-md-4">
                <label for="generoMascota" class="form-label">Género</label>
                <select class="form-select" id="generoMascota">
                  <option value="">Seleccionar</option>
                  <option value="macho">Macho</option>
                  <option value="hembra">Hembra</option>
                </select>
              </div>

              <div class="col-md-4">
                <label for="fechaNacimiento" class="form-label">Fecha de nacimiento</label>
                <input type="date" class="form-control" id="fechaNacimiento">
              </div>

              <div class="col-md-4">
                <label for="pesoMascota" class="form-label">Peso (kg)</label>
                <input type="number" class="form-control" id="pesoMascota" step="0.1" min="0">
              </div>

              <!-- Información médica -->
              <div class="col-12 mt-4">
                <h6 class="border-bottom pb-2 mb-3">Información Médica</h6>
              </div>

              <div class="col-md-6">
                <label for="estadoSalud" class="form-label">Estado de salud</label>
                <select class="form-select" id="estadoSalud">
                  <option value="excelente">Excelente</option>
                  <option value="bueno" selected>Bueno</option>
                  <option value="regular">Regular</option>
                  <option value="delicado">Delicado</option>
                </select>
              </div>

              <div class="col-md-6">
                <label for="microchip" class="form-label">Número de microchip</label>
                <input type="text" class="form-control" id="microchip" placeholder="Opcional">
              </div>

              <div class="col-12">
                <label for="observaciones" class="form-label">Observaciones médicas</label>
                <textarea class="form-control" id="observaciones" rows="3" placeholder="Alergias, medicamentos, condiciones especiales, etc."></textarea>
              </div>

              <!-- Información adicional -->
              <div class="col-12 mt-4">
                <h6 class="border-bottom pb-2 mb-3">Información Adicional</h6>
              </div>

              <div class="col-md-6">
                <label class="form-label">Vacunas</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="vacunaRabica">
                  <label class="form-check-label" for="vacunaRabica">Antirrábica</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="vacunaMultiple">
                  <label class="form-check-label" for="vacunaMultiple">Múltiple/Polivalente</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="vacunaOtras">
                  <label class="form-check-label" for="vacunaOtras">Otras</label>
                </div>
              </div>

              <div class="col-md-6">
                <label class="form-label">Estado reproductivo</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="esterilizado">
                  <label class="form-check-label" for="esterilizado">Esterilizado/Castrado</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="enTratamiento">
                  <label class="form-check-label" for="enTratamiento">En tratamiento médico</label>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-success" onclick="registrarMascota()">
            <i class="bi bi-check-circle me-1"></i>Registrar Mascota
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Ver Mascota -->
  <div class="modal fade" id="verMascotaModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-info-circle me-2"></i>Detalles de la Mascota
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body" id="detallesMascotaContent">
          <!-- Contenido se carga dinámicamente -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-primary" onclick="editarMascotaDesdeVer()">
            <i class="bi bi-pencil me-1"></i>Editar
          </button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Editar Mascota -->
  <div class="modal fade" id="editarMascotaModal" tabindex="-1">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <i class="bi bi-pencil me-2"></i>Editar Mascota
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formEditarMascota">
            <!-- Mismo formulario que nuevo pero pre-rellenado -->
            <input type="hidden" id="editarMascotaId">
            <!-- El formulario se carga dinámicamente con los datos existentes -->
            <div id="formularioEdicion">
              <!-- Contenido dinámico -->
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-warning" onclick="actualizarMascota()">
            <i class="bi bi-check-circle me-1"></i>Actualizar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Datos de ejemplo para las mascotas
    const mascotas = [
      {
        id: 1,
        nombre: "Max",
        tipo: "perro",
        raza: "Golden Retriever",
        edad: 3,
        peso: 28,
        genero: "macho",
        color: "Dorado",
        estadoSalud: "excelente",
        microchip: "123456789",
        observaciones: "Muy activo, le gusta jugar con pelotas",
        vacunas: ["rabica", "multiple"],
        esterilizado: true,
        ultimaConsulta: "2024-09-20",
        emoji: "🐕"
      },
      {
        id: 2,
        nombre: "Luna",
        tipo: "gato",
        raza: "Persa",
        edad: 2,
        peso: 4.5,
        genero: "hembra",
        color: "Blanco",
        estadoSalud: "bueno",
        microchip: "",
        observaciones: "Gata tranquila, le gusta dormir",
        vacunas: ["rabica"],
        esterilizado: true,
        ultimaConsulta: "2024-09-15",
        emoji: "🐱"
      },
      {
        id: 3,
        nombre: "Toby",
        tipo: "perro",
        raza: "Bulldog Francés",
        edad: 5,
        peso: 12,
        genero: "macho",
        color: "Atigrado",
        estadoSalud: "regular",
        microchip: "987654321",
        observaciones: "Problemas respiratorios leves, requiere cuidados especiales",
        vacunas: ["rabica", "multiple"],
        esterilizado: false,
        ultimaConsulta: "2024-09-22",
        emoji: "🐕"
      }
    ];

    let mascotaEditandoId = null;

    // Función para cambiar vista
    document.addEventListener('DOMContentLoaded', function() {
      const vistaGrid = document.getElementById('vista-grid');
      const vistaLista = document.getElementById('vista-lista');
      const vistaGridContent = document.getElementById('vista-grid-content');
      const vistaListaContent = document.getElementById('vista-lista-content');

      vistaGrid.addEventListener('change', function() {
        if (this.checked) {
          vistaGridContent.style.display = 'block';
          vistaListaContent.style.display = 'none';
        }
      });

      vistaLista.addEventListener('change', function() {
        if (this.checked) {
          vistaGridContent.style.display = 'none';
          vistaListaContent.style.display = 'block';
        }
      });

      // Manejo de imagen
      const imagenInput = document.getElementById('imagenMascota');
      if (imagenInput) {
        imagenInput.addEventListener('change', previewImagen);
      }
    });

    // Función para actualizar emoji según tipo de mascota
    function actualizarEmoji() {
      const select = document.getElementById('tipoMascota');
      const selectedOption = select.options[select.selectedIndex];
      const emoji = selectedOption.getAttribute('data-emoji');
      
      // Actualizar preview de imagen si no hay imagen subida
      const preview = document.getElementById('imagenPreview');
      if (preview && !preview.querySelector('img')) {
        if (emoji) {
          preview.innerHTML = `<div style="font-size: 4rem; margin-bottom: 1rem;">${emoji}</div><p>Mascota seleccionada</p>`;
        } else {
          preview.innerHTML = '<i class="bi bi-image"></i><p>Subir foto de la mascota</p>';
        }
      }
    }

    // Función para preview de imagen
    function previewImagen(event) {
      const file = event.target.files[0];
      const preview = document.getElementById('imagenPreview');
      
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          preview.innerHTML = `<img src="${e.target.result}" alt="Preview" style="max-width: 200px; max-height: 200px; border-radius: 10px;">`;
        };
        reader.readAsDataURL(file);
      }
    }

    // Función para eliminar imagen
    function eliminarImagen() {
      const preview = document.getElementById('imagenPreview');
      const input = document.getElementById('imagenMascota');
      
      if (input) input.value = '';
      if (preview) {
        preview.innerHTML = '<i class="bi bi-image"></i><p>Subir foto de la mascota</p>';
      }
      
      // Actualizar con emoji si hay tipo seleccionado
      actualizarEmoji();
    }

    // Funciones para gestión de mascotas
    function verMascota(mascotaId) {
      const mascota = mascotas.find(m => m.id === mascotaId);
      if (mascota) {
        const estadoBadges = {
          'excelente': '<span class="badge bg-success">Excelente</span>',
          'bueno': '<span class="badge bg-warning">Bueno</span>',
          'regular': '<span class="badge bg-secondary">Regular</span>',
          'delicado': '<span class="badge bg-danger">Delicado</span>'
        };

        document.getElementById('detallesMascotaContent').innerHTML = `
          <div class="row g-4">
            <div class="col-12 text-center mb-3">
              <div style="font-size: 5rem;">${mascota.emoji}</div>
              <h3>${mascota.nombre}</h3>
              <p class="text-muted">${mascota.raza || mascota.tipo}</p>
            </div>
            
            <div class="col-md-6">
              <h6>Información Básica</h6>
              <table class="table table-sm">
                <tr><td><strong>Tipo:</strong></td><td>${mascota.tipo.charAt(0).toUpperCase() + mascota.tipo.slice(1)}</td></tr>
                <tr><td><strong>Raza:</strong></td><td>${mascota.raza || 'No especificada'}</td></tr>
                <tr><td><strong>Edad:</strong></td><td>${mascota.edad} años</td></tr>
                <tr><td><strong>Peso:</strong></td><td>${mascota.peso} kg</td></tr>
                <tr><td><strong>Género:</strong></td><td>${mascota.genero || 'No especificado'}</td></tr>
                <tr><td><strong>Color:</strong></td><td>${mascota.color || 'No especificado'}</td></tr>
              </table>
            </div>
            
            <div class="col-md-6">
              <h6>Estado de Salud</h6>
              <div class="mb-3">${estadoBadges[mascota.estadoSalud]}</div>
              
              <h6>Información Médica</h6>
              <table class="table table-sm">
                <tr><td><strong>Microchip:</strong></td><td>${mascota.microchip || 'No registrado'}</td></tr>
                <tr><td><strong>Esterilizado:</strong></td><td>${mascota.esterilizado ? 'Sí' : 'No'}</td></tr>
                <tr><td><strong>Última consulta:</strong></td><td>${new Date(mascota.ultimaConsulta).toLocaleDateString('es-ES')}</td></tr>
              </table>
            </div>
            
            <div class="col-12">
              <h6>Vacunas</h6>
              <div class="mb-3">
                ${mascota.vacunas.map(v => `<span class="badge bg-primary me-1">${v.charAt(0).toUpperCase() + v.slice(1)}</span>`).join('')}
              </div>
              
              <h6>Observaciones</h6>
              <p class="text-muted">${mascota.observaciones || 'Sin observaciones'}</p>
            </div>
          </div>
        `;

        new bootstrap.Modal(document.getElementById('verMascotaModal')).show();
      }
    }

    function editarMascota(mascotaId) {
      mascotaEditandoId = mascotaId;
      const mascota = mascotas.find(m => m.id === mascotaId);
      
      if (mascota) {
        // Cargar formulario de edición con datos existentes
        document.getElementById('formularioEdicion').innerHTML = `
          <!-- Aquí iría el mismo formulario que el de nueva mascota pero pre-rellenado -->
          <div class="text-center mb-4">
            <div class="mascota-imagen-upload">
              <div class="imagen-preview" id="imagenPreviewEdit">
                <div style="font-size: 4rem;">${mascota.emoji}</div>
              </div>
              <input type="file" class="form-control" id="imagenMascotaEdit" accept="image/*" style="display: none;">
              <div class="mt-2">
                <button type="button" class="btn btn-outline-primary" onclick="document.getElementById('imagenMascotaEdit').click()">
                  <i class="bi bi-camera me-1"></i>Cambiar Imagen
                </button>
              </div>
            </div>
          </div>
          <p class="text-center"><em>Función de edición completa en desarrollo</em></p>
        `;
        
        new bootstrap.Modal(document.getElementById('editarMascotaModal')).show();
      }
    }

    function eliminarMascota(mascotaId) {
      const mascota = mascotas.find(m => m.id === mascotaId);
      if (mascota && confirm(`¿Estás seguro de que deseas eliminar a ${mascota.nombre}? Esta acción no se puede deshacer.`)) {
        alert(`${mascota.nombre} ha sido eliminado del registro.`);
        // Aquí iría la lógica para eliminar de la base de datos
      }
    }

    function registrarMascota() {
      const form = document.getElementById('formNuevaMascota');
      
      // Validar campos requeridos
      const nombre = document.getElementById('nombreMascota').value;
      const tipo = document.getElementById('tipoMascota').value;
      
      if (!nombre || !tipo) {
        alert('Por favor, completa al menos el nombre y tipo de mascota.');
        return;
      }
      
      // Aquí iría la lógica para enviar al servidor
      alert('¡Mascota registrada exitosamente!');
      
      // Cerrar modal y limpiar formulario
      bootstrap.Modal.getInstance(document.getElementById('nuevaMascotaModal')).hide();
      form.reset();
      eliminarImagen();
    }

    function actualizarMascota() {
      if (mascotaEditandoId) {
        alert(`Mascota ${mascotaEditandoId} actualizada exitosamente!`);
        bootstrap.Modal.getInstance(document.getElementById('editarMascotaModal')).hide();
      }
    }

    function editarMascotaDesdeVer() {
      bootstrap.Modal.getInstance(document.getElementById('verMascotaModal')).hide();
      // Buscar la mascota que se está viendo y editarla
      const mascotaId = 1; // Esto se obtendría del contexto
      editarMascota(mascotaId);
    }

    function limpiarFiltros() {
      document.getElementById('buscarMascota').value = '';
      document.getElementById('filtroTipo').value = '';
      document.getElementById('filtroEdad').value = '';
      document.getElementById('filtroSalud').value = '';
    }

    // Event listeners para filtros
    document.getElementById('buscarMascota').addEventListener('input', function() {
      const termino = this.value.toLowerCase();
      console.log('Buscando:', termino);
    });

    document.getElementById('filtroTipo').addEventListener('change', function() {
      const tipo = this.value;
      console.log('Filtrar por tipo:', tipo);
    });

    document.getElementById('filtroEdad').addEventListener('change', function() {
      const edad = this.value;
      console.log('Filtrar por edad:', edad);
    });

    document.getElementById('filtroSalud').addEventListener('change', function() {
      const salud = this.value;
      console.log('Filtrar por salud:', salud);
    });
  </script>

  <style>
    /* Estilos específicos para mascotas */
    .mascota-card {
      background: var(--white);
      border-radius: 20px;
      box-shadow: var(--shadow);
      transition: all 0.3s ease;
      overflow: hidden;
    }

    .mascota-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .mascota-header {
      padding: 1.5rem;
      position: relative;
      background: linear-gradient(135deg, #f8f9fa, #ffffff);
    }

    .mascota-imagen {
      position: relative;
      text-align: center;
      margin-bottom: 1rem;
    }

    .mascota-avatar {
      font-size: 3rem;
      width: 80px;
      height: 80px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary-purple), var(--primary-green));
      border-radius: 50%;
      color: white;
      position: relative;
    }

    .mascota-estado {
      position: absolute;
      bottom: 5px;
      right: 5px;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 3px solid white;
    }

    .mascota-estado.excelente { background-color: var(--success-color); }
    .mascota-estado.bueno { background-color: var(--warning-color); }
    .mascota-estado.regular { background-color: var(--info-color); }
    .mascota-estado.delicado { background-color: var(--error-color); }

    .mascota-actions {
      position: absolute;
      top: 1rem;
      right: 1rem;
      display: flex;
      gap: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .mascota-card:hover .mascota-actions {
      opacity: 1;
    }

    .mascota-body {
      padding: 0 1.5rem 1rem;
    }

    .mascota-nombre {
      font-size: 1.25rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
      color: var(--dark-text);
    }

    .mascota-raza {
      color: var(--light-text);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .mascota-info {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }

    .info-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.8rem;
    }

    .info-item i {
      color: var(--primary-purple);
      margin-bottom: 0.25rem;
    }

    .mascota-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .tag {
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 500;
    }

    .tag.vacunado { background-color: rgba(40, 167, 69, 0.1); color: var(--success-color); }
    .tag.pendiente { background-color: rgba(255, 193, 7, 0.1); color: #856404; }
    .tag.microchip { background-color: rgba(0, 123, 255, 0.1); color: #0056b3; }
    .tag.esterilizado { background-color: rgba(108, 117, 125, 0.1); color: var(--light-text); }
    .tag.tratamiento { background-color: rgba(220, 53, 69, 0.1); color: var(--error-color); }

    .mascota-footer {
      padding: 0 1.5rem 1.5rem;
      border-top: 1px solid #f1f3f4;
      padding-top: 1rem;
      margin-top: 1rem;
    }

    /* Estilos para upload de imagen */
    .mascota-imagen-upload {
      text-align: center;
    }

    .imagen-preview {
      width: 200px;
      height: 200px;
      border: 2px dashed #dee2e6;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      background-color: #f8f9fa;
    }

    .imagen-preview:hover {
      border-color: var(--primary-purple);
      background-color: rgba(119, 41, 211, 0.05);
    }

    .imagen-preview i {
      font-size: 3rem;
      color: var(--light-text);
      margin-bottom: 0.5rem;
    }

    .imagen-preview p {
      margin: 0;
      color: var(--light-text);
      font-size: 0.9rem;
    }

    .imagen-preview img {
      max-width: 100%;
      max-height: 100%;
      object-fit: cover;
      border-radius: 12px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .mascota-card {
        margin-bottom: 1rem;
      }
      
      .mascota-actions {
        position: static;
        opacity: 1;
        justify-content: center;
        margin-top: 1rem;
      }
      
      .mascota-info {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .info-item {
        flex-direction: row;
        justify-content: space-between;
      }
    }
  </style>
</body>
</html>